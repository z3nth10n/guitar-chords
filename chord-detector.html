<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title data-i18n="app_title">Detector de acordes y notas de guitarra</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="css/chord-detector.css">
</head>

<body>
  <div class="app">
    <div class="header-row">
      <div>
        <h1 data-i18n="main_title">Guitar Analyzer</h1>
        <p class="subtitle" data-i18n="subtitle">
          Toca una nota o un acorde de guitarra. El sistema intentará adivinar la nota, la cuerda/traste
          y, si es posible, el acorde.
        </p>
      </div>
      <div class="status-chip">
        <span id="statusDot" class="status-dot idle"></span>
        <span id="statusText" data-i18n="status_stopped">Parado</span>
      </div>
    </div>

    <div class="controls">
      <button id="toggleButton" type="button" data-i18n="btn_start">Empezar a escuchar</button>
      
      <div style="margin-left: auto; display: flex; align-items: center;">
          <label for="langSelect" data-i18n="label_language" style="margin-right: 8px; font-size: 13px; color: var(--muted);">Idioma:</label>
          <select id="langSelect">
            <option value="en">English</option>
            <option value="es">Español</option>
          </select>
      </div>
    </div>

    <div class="panel">
      <div class="result-chord">
        <div class="result-chord-label" data-i18n="label_chord_detected">Acorde detectado</div>
        <div id="chordDisplay" class="result-chord-value"></div>
        <div id="chordNotes" class="result-chord-notes" data-i18n="msg_play_chord">Toca varias cuerdas para intentar detectar un acorde.</div>
      </div>

      <div class="result-grid">
        <div class="result-card">
          <div class="result-label" data-i18n="label_main_note">Nota principal</div>
          <div id="noteDisplay" class="result-main"></div>
          <div id="noteDetail" class="result-secondary"></div>
        </div>

        <div class="result-card">
          <div class="result-label" data-i18n="label_string_fret">Cuerda / traste sugeridos</div>
          <div id="stringFretDisplay" class="result-main"></div>
          <div id="stringFretDetail" class="result-secondary"></div>
        </div>
      </div>

      <div id="errors"></div>
      <p class="hint" data-i18n="hint_text" data-i18n-html="true">
        Consejo: usa una <strong>guitarra bien afinada</strong>, toca limpio cerca del micro y evita ruido de fondo.
        La detección de acordes es aproximada (no es tan precisa como un plugin dedicado).
      </p>
    </div>

    <canvas id="waveCanvas" width="640" height="80"></canvas>
  </div>

  <script src="js/langs.js"></script>
  <script src="js/chord-detector.js"></script>
</body>
</html>
